---
category: Golang
tags:
  - struct
date: 2020-03-27
title: 结构体与方法
lang: zh-CN
---
结构体与方法

<!-- more -->
## 结构体
### 定义
```go
type person struct{
    name string
    age int
}
```

### 匿名结构体
```go
var a = struct {
    x int
    y int
}{10,20}
```

### 声明一个结构体变量
```go
//声明并初始化
p0 := person{
    name: "zq",
    age:  19,
}
//不使用字段名声明
p1 := person{"zq", 20}
```

## 方法
- 方法实际上就是函数，在声明方式上有所不同
```go
//值接收者
func (p person) showAge()  {
	fmt.Printf("%s已经%v岁了",p.name,p.age)
}
//指针接收者
func (p *person) addAge()  {
    p.age++
	fmt.Printf("%s长了一岁,%v岁了",p.name,p.age)
}
```
- 值接收者
```go
p := person{"zq", 21}
p.showAge()
```
在这里变量`p`的值作为接收者来调用，`showAge`方法实际拿到的是`p`的一个副本

- 指针接收者
```go
p := &person{"zq", 21}
p.addAge() //age值会改变 22
```
显然使用指针接收者的方法会用实际值来调用变量，会改变`p`的值
*其实无论声明的是指针变量还是值变量，都可以互相调用方法，编译器会对两种值做转换处理*



